---
import config from 'wathqny:config'

import { BaseHead } from 'astro-toolkit/seo'

import type { LayoutInterface } from './types/components'

export interface Props extends LayoutInterface {}

const { title, keywords, description, OGImage } = Astro.props as Props

const METATITLE = title ? `${title} - ${config?.siteName}` : config?.siteName
const METAIMAGE = OGImage?.src ?? config?.OGImage?.src
const METAIMAGEALT = OGImage?.alt ?? config?.OGImage?.alt
const METADESCRIPTION = description ?? config?.description
const METAKEYWORDS = keywords ?? [...(config?.keywords || [])]
---

<BaseHead
  title={METATITLE}
  description={METADESCRIPTION}
  keywords={METAKEYWORDS}
  OGImage={{ src: METAIMAGE, alt: METAIMAGEALT }}
  GSVToken={config?.GSVToken}
  extend={{
    // link: [
    //   {
    //     href: config?.font,
    //     rel: "preload",
    //     as: "font",
    //     type: "font/woff2",
    //     crossorigin: "anonymous",
    //   },
    //   {
    //     href: config?.css,
    //     rel: "preload",
    //     as: "stylesheet",
    //     type: "css/text",
    //     crossorigin: "anonymous",
    //   },
    // ],
  }}
>
  <link rel="icon" type="image/x-icon" href="/icon.svg" /> 
  <meta name="color-scheme" content="dark light" />
  <script is:inline>
    const root = document.documentElement;
    localStorage.theme === "dark" || (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches) && (root?.classList.add("dark"))
  </script>
  <meta name="generator" content="wathqny 1.0 Astro powered" />
  <slot />
</BaseHead>
