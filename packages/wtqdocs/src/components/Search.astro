<div class="wtq-search">
  <input type="search" aria-label="Search" class="wtq-focusable" id="search">
  <svg class="wtq-search-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256"><path fill="currentColor" d="M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"/></svg>
</div>

<script>
import FullTextSearch from './full-text-search';

const searchInput = document.getElementById('search') as HTMLInputElement;

searchInput?.addEventListener('input', async () => {

  const data = await (await fetch("/search.json")).json()
  const keysToSearch = ['title', "link"];

  const fullTextSearch = new FullTextSearch([...data.posts, ...data.docs], keysToSearch);

  const query = searchInput.value.trim();
  const results = fullTextSearch.search(query);

  console.log("search: ", ...results)
});

</script>